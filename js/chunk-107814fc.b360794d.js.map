{"version":3,"sources":["webpack:///./src/views/Blog.vue?38d1","webpack:///./src/views/Blog.vue?8287","webpack:///src/views/Blog.vue","webpack:///./src/views/Blog.vue?fa10","webpack:///./src/views/Blog.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","model","value","callback","$$v","title","trim","expression","attrs","markdownOption","on","viewHtml","imgAdd","blogMarkdown","submitBlog","_v","_s","blogId","staticRenderFns","component"],"mappings":"2IAAA,yBAAqiB,EAAG,G,yCCAxiB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,WAAW,CAACG,MAAM,CAACC,MAAOR,EAAS,MAAES,SAAS,SAAUC,GAAMV,EAAIW,MAAsB,kBAARD,EAAkBA,EAAIE,OAAQF,GAAMG,WAAW,WAAWT,EAAG,eAAe,CAACU,MAAM,CAAC,QAAS,EAAK,SAAWd,EAAIe,gBAAgBC,GAAG,CAAC,SAAWhB,EAAIiB,SAAS,OAASjB,EAAIkB,QAAQX,MAAM,CAACC,MAAOR,EAAgB,aAAES,SAAS,SAAUC,GAAMV,EAAImB,aAAaT,GAAKG,WAAW,kBAAkBT,EAAG,YAAY,CAACY,GAAG,CAAC,MAAQhB,EAAIoB,aAAa,CAACpB,EAAIqB,GAAGrB,EAAIsB,GAAGtB,EAAIuB,OAAO,KAAK,UAAU,IACrkBC,EAAkB,GCatB,GACE,KAAF,OACE,KAFF,WAGI,MAAJ,CACM,MAAN,GACM,OAAN,GACM,aAAN,GACM,SAAN,GACM,eAAN,CACQ,MAAR,EACQ,QAAR,EACQ,QAAR,EACQ,WAAR,EACQ,eAAR,EACQ,MAAR,EACQ,aAAR,EACQ,WAAR,EACQ,OAAR,EACQ,IAAR,EACQ,IAAR,EACQ,MAAR,EACQ,WAAR,EACQ,MAAR,EACQ,OAAR,EACQ,YAAR,EACQ,WAAR,EACQ,UAAR,EACQ,MAAR,EAEQ,MAAR,EACQ,MAAR,EACQ,OAAR,EACQ,MAAR,EAEQ,YAAR,EAEQ,WAAR,EACQ,aAAR,EACQ,YAAR,EAEQ,UAAR,EACQ,SAAR,KAME,QAAF,CACI,OADJ,SACA,KAEM,IAAN,eACM,EAAN,kBACM,KAAN,gBAYI,WAjBJ,WAiBM,IAAN,OACM,IAAN,WAEQ,OADA,KAAR,4BACA,EAEM,KAAN,WACM,IAAN,6CACA,GACQ,MAAR,WACQ,aAAR,kBACQ,SAAR,eAEA,cACQ,EAAR,gBAEM,QAAN,OACM,KAAN,WACA,kBACQ,QAAR,OACA,cACU,EAAV,yCACU,EAAV,8BALA,UAQA,YACQ,QAAR,WAII,SA9CJ,WA+CM,IAAN,4DACM,KAAN,sBAEI,UAlDJ,SAkDA,GAAM,IAAN,OACM,KAAN,sBAAQ,GAAR,IACA,kBACQ,QAAR,OACA,cACU,QAAV,YACU,EAAV,mBACU,EAAV,qCANA,UASA,YACQ,QAAR,YAIE,QAhHF,WAiHA,uBACM,KAAN,4BACM,KAAN,0BCjI8U,I,wBCQ1UC,EAAY,eACd,EACA1B,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-107814fc.b360794d.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=style&index=0&id=14dd149b&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=style&index=0&id=14dd149b&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"artical\"},[_c('el-input',{model:{value:(_vm.title),callback:function ($$v) {_vm.title=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"title\"}}),_c('mavon-editor',{attrs:{\"ishljs\":true,\"toolbars\":_vm.markdownOption},on:{\"htmlCode\":_vm.viewHtml,\"imgAdd\":_vm.imgAdd},model:{value:(_vm.blogMarkdown),callback:function ($$v) {_vm.blogMarkdown=$$v},expression:\"blogMarkdown\"}}),_c('el-button',{on:{\"click\":_vm.submitBlog}},[_vm._v(_vm._s(_vm.blogId?'编辑':'新增'))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"artical\">\n        <el-input v-model.trim=\"title\"></el-input>\n        <mavon-editor\n                :ishljs=\"true\"\n                :toolbars=\"markdownOption\"\n                @htmlCode=\"viewHtml\"\n                @imgAdd=\"imgAdd\"\n                v-model=\"blogMarkdown\"/>\n        <el-button @click=\"submitBlog\">{{blogId?'编辑':'新增'}}</el-button>\n\n    </div>\n</template>\n<script>\n    export default {\n        name: 'blog',\n        data() {\n            return {\n                title: '',\n                blogId: '',\n                blogMarkdown: \"\",\n                blogHtml: '',\n                markdownOption: {\n                    bold: true, // 粗体\n                    italic: true, // 斜体\n                    header: true, // 标题\n                    underline: true, // 下划线\n                    strikethrough: true, // 中划线\n                    mark: true, // 标记\n                    superscript: true, // 上角标\n                    subscript: true, // 下角标\n                    quote: true, // 引用\n                    ol: true, // 有序列表\n                    ul: true, // 无序列表\n                    link: true, // 链接\n                    imagelink: true, // 图片链接\n                    code: true, // code\n                    table: true, // 表格\n                    fullscreen: true, // 全屏编辑\n                    readmodel: true, // 沉浸式阅读\n                    htmlcode: true, // 展示html源码\n                    help: true, // 帮助\n                    /* 1.3.5 */\n                    undo: true, // 上一步\n                    redo: true, // 下一步\n                    trash: true, // 清空\n                    save: true, // 保存（触发events中的save事件）\n                    /* 1.4.2 */\n                    navigation: true, // 导航目录\n                    /* 2.1.8 */\n                    alignleft: true, // 左对齐\n                    aligncenter: true, // 居中\n                    alignright: true, // 右对齐\n                    /* 2.2.1 */\n                    subfield: true, // 单双栏模式\n                    preview: true, // 预览\n                },\n\n\n            }\n        },\n        methods: {\n            imgAdd(pos, $file){\n                // 第一步.将图片上传到服务器.\n                const formdata = new FormData();\n                formdata.append('image', $file);\n                this.$uploadToOss()\n                // axios({\n                //     url: 'server url',\n                //     method: 'post',\n                //     data: formdata,\n                //     headers: { 'Content-Type': 'multipart/form-data' },\n                // }).then((url) => {\n                //     // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n                //     // $vm.$img2Url 详情见本页末尾\n                //     $vm.$img2Url(pos, url);\n                // })\n            },\n            submitBlog() {\n                if(!this.title){\n                    this.$message.warning(\"标题不能为空\")\n                    return false;\n                }\n                this.viewHtml();\n                const url = this.blogId ? 'blog/editBlog' : 'blog/addBlog';\n                const data = {\n                    title: this.title,\n                    blogMarkdown: this.blogMarkdown,\n                    blogHtml: this.blogHtml\n                }\n                if(this.blogId){\n                    data.id=this.blogId;\n                }\n                console.dir(data)\n                this.$post(url, data)\n                    .then(res => {\n                        console.log(res)\n                        if (res.code == 200) {\n                            this.$message.success(this.blogId ? '编辑成功' : '新增成功');\n                            this.$router.push('/blogList')\n                        }\n                    })\n                    .catch(err => {\n                        console.log(err)\n                    })\n\n            },\n            viewHtml() {\n                const dom = document.getElementsByClassName('v-show-content-html')[0];\n                this.blogHtml = dom.innerText;\n            },\n            getDetail(id) {\n                this.$post('blog/getBlog', {id})\n                    .then(res => {\n                        console.log(res)\n                        if (res.code == 200) {\n                            console.dir(res.data)\n                            this.title = res.data.title;\n                            this.blogMarkdown = res.data.blogMarkdown;\n                        }\n                    })\n                    .catch(err => {\n                        console.log(err)\n                    })\n            },\n        },\n        mounted() {\n            if (this.$route.query.id) {\n                this.blogId = this.$route.query.id;\n                this.getDetail(this.blogId)\n            }\n        }\n    }\n</script>\n<style lang=\"less\" scoped>\n    .artical {\n        text-align: left;\n        .large-margin {\n            margin-top: 430px;\n        }\n        .mask {\n            position: fixed;\n            left: 0;\n            right: 0;\n            top: 0;\n            height: 430px;\n            background: url('http://qa3wvi1lp.bkt.clouddn.com/%E6%88%AA%E5%B1%8F2020-05-12%20%E4%B8%8B%E5%8D%8811.35.40.png') no-repeat;\n            background-size: cover;\n            z-index: 99;\n        }\n        .noHide {\n            width: 100%;\n        }\n        .hide {\n            width: 300px;\n            height: 300px;\n        }\n    }\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Blog.vue?vue&type=template&id=14dd149b&scoped=true&\"\nimport script from \"./Blog.vue?vue&type=script&lang=js&\"\nexport * from \"./Blog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Blog.vue?vue&type=style&index=0&id=14dd149b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14dd149b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}